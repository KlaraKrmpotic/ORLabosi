<!DOCTYPE html>
<html>
<head>
    <title>Datatable</title>
    <meta name="author" content="Klara Krmpotić">
    <meta name="description" content="Search engine for database tables">
    <meta charset="UTF-12">
    <link rel="stylesheet" type="text/css" href="./style/datatable.css">
</head>

<body>

    <%- include(`header`); %>

    <h2>Polje za pretragu</h2>

    <form action="">
        <input type="text" id="vrijednost" name="vrijednost" placeholder="Unesite vrijednost"><br>
        <a>Po ovoj vrijednosti će se pretraživati podaci</a><br><br>
        <label for="polje">Odaberi polje za pretragu:</label>
        <select name="polje" id="polje" placeholder="Odaberi polje" onchange="kojePolje(this.value)">
            <option value="sve">Sva polja (wildcard)</option>
            <option value="idHotel">ID</option>
            <option value="imeHotel">Ime</option>
            <option value="brZvjezdica">Broj zvjezdica</option>
            <option value="telefonHotel">Telefon</option>
            <option value="email">Email</option>
            <option value="adresaHotel">Adresa</option>
            <option value="brojSoba">Broj soba</option>
            <option value="wikiStranica">Wikipedia stranica</option>
            <option value="godIzgradnje">Godina izgradnje</option>
            <option value="nazivGrad">Grad</option>
            <option value="pbrgrad">Poštanski broj</option>
        </select>
        <br><br>
        <input type="submit" value="Pretraži" onclick="pretrazi()">
    </form>
    <!--HTML tablice koja se zajedno s obrascem za filtriranje i asinkronim pozivom za dohvaćanje podataka-->

    <table>
        <tr>    <!--Popis atributa-->
            <th>Hotel ID</th>
            <th>Ime hotela</th>
            <th>Broj zvjezdica</th>
            <th>Godina izgradnje</th>
            <th>Wiki handle</th>
            <th>Telefon</th>
            <th>Adresa</th>
            <th>Email</th>
            <th>Broj soba</th>
            <th>Ime grada</th>
            <th>Poštanski broj</th>
        </tr>
        <tr id="promjena">

        </tr>
    <!--    <% for (let hotel of hotels) { %>
            <tr id="promjena">
                <td><%= hotel.imeHotel %></td>
                <td><%= hotel.brZvjezdica %></td>
                <td><%= hotel.godIzgradnje %></td>
                <td><%= hotel.wikiStranica %></td>
                <td><%= hotel.telefonHotel %></td>
                <td><%= hotel.adresaHotel %></td>
                <td><%= hotel.email %></td>
                <td><%= hotel.brojSoba %></td>
                <td><%= hotel.nazivGrad %></td>
                <td><%= hotel.pbrGrad %></td>
            </tr>
        <% } %>
    -->
    </table>

</body>

<script>

    function kojePolje(str) {
        localStorage.setItem("trazeniAtribut", str);
    }
    function pretrazi() {
        var vrijednost = document.getElementById("vrijednost").value;
        //console.log(vrijednost);
        localStorage.setItem("unesenaVrijednost", vrijednost);
        xhttp = new XMLHttpRequest();
        xhttp.onreadystatechange = function() {
            if (this.readyState == 4 && this.status == 200) {
                document.getElementById("promjena").innerHTML = this.responseText;
            }
        };

        xhttp.open("GET", "getRows.js", true);
        xhttp.send();
    }
</script>

</html>